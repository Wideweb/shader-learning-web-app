<div class="page">

    <h2 class="header max-width">Rating</h2>

    <ng-container *ngIf="loaded$ | async">

        <div class="rating max-width" [ngClass]="{hidden: !tableReady}">

            <div class="table" #table>
                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

                    <ng-container matColumnDef="index">
                        <th mat-header-cell *matHeaderCellDef class="header-cell p3 index"> # </th>
                        <td mat-cell *matCellDef="let element" class="cell index">
                            <div class="container">
                                <span class="p2">{{element.index}}</span>
                                <app-svg-icon name="award-gold" *ngIf="element.index == 1"></app-svg-icon>
                                <app-svg-icon name="award-silver" *ngIf="element.index == 2"></app-svg-icon>
                                <app-svg-icon name="award-bronze" *ngIf="element.index == 3"></app-svg-icon>
                            </div>
                        </td>
                    </ng-container>
        
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef class="header-cell p3 name"> Name </th>
                        <td mat-cell *matCellDef="let element" class="cell name">
                            <div class="cut-text">
                                <a class="btn-text p2" routerLink="./user/{{element.id}}">{{element.name}}</a>
                            </div>
                        </td>
                    </ng-container>
        
                    <ng-container matColumnDef="rank">
                        <th mat-header-cell *matHeaderCellDef class="header-cell p3 rank"> Score </th>
                        <td mat-cell *matCellDef="let element" class="cell p2 rank"> {{element.rank}} </td>
                    </ng-container>

                    <ng-container matColumnDef="solved">
                        <th mat-header-cell *matHeaderCellDef class="header-cell p3 solved"> Tasks Solved </th>
                        <td mat-cell *matCellDef="let element" class="cell p2 solved"> {{element.solved}} </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="header-row"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="row"></tr>
                </table>
            </div>
        
            <div class="paginator">
                <ng-container *ngIf="tableReady">
                    <p class="p3 range-label">{{pageFrom}}-{{pageTo}} out of {{length}} items</p>
                    <a class="btn-ico" (click)="previousPage()" [attr.disabled]="isFirstPage"><i class="ico chevron-left-ico"></i></a>
                    <a class="btn-ico" (click)="nextPage()" [attr.disabled]="isLastPage"><i class="ico chevron-right-ico"></i></a>
                </ng-container>
            </div>
        </div>

    </ng-container>
</div>

<mat-paginator hidePageSize="true"></mat-paginator>

    